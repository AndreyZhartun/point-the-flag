(this["webpackJsonpreact-spa"]=this["webpackJsonpreact-spa"]||[]).push([[0],{34:function(t){t.exports=JSON.parse('{"a":[{"path":"assets/country_flags/1.png","code":"ad"},{"path":"assets/country_flags/2.png","code":"ae"},{"path":"assets/country_flags/3.png","code":"af"},{"path":"assets/country_fl4s/4.png","code":"ag"},{"path":"assets/country_flags/5.png","code":"al"},{"path":"assets/country_flags/6.png","code":"am"},{"path":"assets/country_flags/7.png","code":"ao"},{"path":"assets/country_flags/8.png","code":"ar"},{"path":"assets/country_flags/9.png","code":"at"},{"path":"assets/country_flags/10.png","code":"a"},{"path":"assets/country_flags/11.png","code":"az"},{"path":"assets/country_flags/12.png","code":"ba"},{"path":"assets/country_flags/13.png","code":"bb"},{"path":"assets/country_flags/14.png","code":"bd"},{"path":"assets/country_flags/15.png","code":"be"},{"path":"assets/country_flags/16.png","code":"bf"},{"path":"assets/country_flags/17.png","code":"bg"},{"path":"assets/country_flags/18.png","code":"bh"},{"path":"assets/country_flags/19.png","code":"bi"},{"path":"assets/country_flags/20.png","code":"bj"},{"path":"assets/country_flags/21.png","code":"bn"},{"path":"assets/country_flags/22.png","code":"bo"},{"path":"assets/country_flags/23.png","code":"br"},{"path":"assets/country_flags/24.png","code":"bs"},{"path":"assets/country_flags/25.png","code":"bt"},{"path":"assets/country_flags/26.png","code":"bw"},{"path":"assets/country_flags/27.png","code":"by"},{"path":"assets/country_flags/28.png","code":"bz"},{"path":"assets/country_flags/29.png","code":"ca"},{"path":"assets/country_flags/30.png","code":"cd"},{"path":"assets/country_flags/31.png","code":"cf"},{"path":"assets/country_flags/32.png","code":"cg"},{"path":"assets/country_flags/33.png","code":"ch"},{"path":"assets/country_flags/34.png","code":"ci"},{"path":"assets/country_flags/35.png","code":"cl"},{"path":"assets/country_flags/36.png","code":"cm"},{"path":"assets/country_flags/37.png","code":"cn"},{"path":"assets/38untry_flags/38.png","code":"co"},{"path":"assets/country_flags/39.png","code":"cr"},{"path":"assets/country_flags/40.png","code":"c"},{"path":"assets/country_flags/41.png","code":"cv"},{"path":"assets/country_flags/42.png","code":"cy"},{"path":"assets/country_flags/43.png","code":"cz"},{"path":"assets/country_flags/44.png","code":"de"},{"path":"assets/country_flags/45.png","code":"dj"},{"path":"assets/country_flags/46.png","code":"dk"},{"path":"assets/country_flags/47.png","code":"dm"},{"path":"assets/country_flags/48.png","code":"do"},{"path":"assets/country_flags/49.png","code":"dz"},{"path":"assets/country_flags/50.png","code":"ec"},{"path":"assets/country_flags/51.png","code":"ee"},{"path":"assets/country_flags/52.png","code":"eg"},{"path":"assets/country_flags/53.png","code":"eh"},{"path":"assets/country_flags/54.png","code":"er"},{"path":"assets/country_flags/55.png","code":"es"},{"path":"ass56s/country_flags/56.png","code":"et"},{"path":"assets/country_flags/57.png","code":"fi"},{"path":"assets/country_flags/58.png","code":"fj"},{"path":"assets/country_flags/59.png","code":"fm"},{"path":"assets/country_flags/60.png","code":"fr"},{"path":"assets/country_flags/61.png","code":"ga"},{"path":"assets/country_flags/62.png","code":"gb"},{"path":"assets/country_flags/63.png","code":"gd"},{"path":"assets/country_flags/64.png","code":"ge"},{"path":"assets/country_flags/65.png","code":"gh"},{"path":"assets/country_flags/66.png","code":"gm"},{"path":"assets/country_flags/67.png","code":"gn"},{"path":"assets/country_flags/68.png","code":"gq"},{"path":"assets/country_flags/69.png","code":"gr"},{"path":"assets/country_flags/70.png","code":"gt"},{"path":"assets/country_flags/71.png","code":"gw"},{"path":"assets/country_flags/72.png","code":"gy"},{"path":"assets/country_flags/73.png","code":"hn"},{"path":"assets/country_flags/74.png","code":"hr"},{"path":"assets/country_flags/75.png","code":"ht"},{"path":"assets/country_flags/76.png","code":"h"},{"path":"assets/country_flags/77.png","code":"id"},{"path":"assets/country_flags/78.png","code":"ie"},{"path":"assets/country_flags/79.png","code":"il"},{"path":"assets/country_flags/80.png","code":"in"},{"path":"assets/country_flags/81.png","code":"iq"},{"path":"assets/country_flags/82.png","code":"ir"},{"path":"assets/country_flags/83.png","code":"is"},{"path":"assets/country_flags/84.png","code":"it"},{"path":"assets/country_flags/85.png","code":"jm"},{"path":"assets/country_flags/86.png","code":"jo"},{"path":"assets/country_flags/87.png","code":"jp"},{"path":"assets/country_flags/88.png","code":"ke"},{"path":"assets/country_flags/89.png","code":"kg"},{"path":"assets/country_flags/90.png","code":"kh"},{"path":"assets/country_flags/91.png","code":"ki"},{"path":"assets/country_flags/92.png","code":"km"},{"path":"assets/country_flags/93.png","code":"kn"},{"path":"assets/country_flags/94.png","code":"kp"},{"path":"assets/country_flags/95.png","code":"kr"},{"path":"assets/country_flags/96.png","code":"ks"},{"path":"assets/country_flags/97.png","code":"kw"},{"path":"assets/country_flags/98.png","code":"kz"},{"path":"assets/country_flags/99.png","code":"la"},{"path":"assets/country_flags/100.png","code":"lb"},{"path":"assets/country_flags/101.png","code":"lc"},{"path":"assets/country_flags/102.png","code":"li"},{"path":"assets/country_flags/103.png","code":"lk"},{"path":"assets/country_flags/104.png","code":"lr"},{"path":"assets/country_flags/105.png","code":"ls"},{"path":"assets/country_flags/106.png","code":"lt"},{"path":"assets/country_flags/107.png","code":"l"},{"path":"assets/country_flags/108.png","code":"lv"},{"path":"assets/country_flags/109.png","code":"ly"},{"path":"assets/country_flags/110.png","code":"ma"},{"path":"assets/country_flags/111.png","code":"mc"},{"path":"assets/country_flags/112.png","code":"md"},{"path":"assets/country_flags/113.png","code":"me"},{"path":"assets/country_flags/114.png","code":"mg"},{"path":"assets/country_flags/115.png","code":"mh"},{"path":"assets/country_flags/116.png","code":"mk"},{"path":"assets/country_flags/117.png","code":"ml"},{"path":"assets/country_flags/118.png","code":"mm"},{"path":"assets/country_flags/119.png","code":"mn"},{"path":"assets/country_flags/120.png","code":"mr"},{"path":"assets/country_flags/121.png","code":"mt"},{"path":"assets/country_flags/122.png","code":"m"},{"path":"assets/country_flags/123.png","code":"mv"},{"path":"assets/country_flags/124.png","code":"mw"},{"path":"assets/country_flags/125.png","code":"mx"},{"path":"assets/country_flags/126.png","code":"my"},{"path":"assets/country_flags/127.png","code":"mz"},{"path":"assets/country_flags/128.png","code":"na"},{"path":"assets/country_flags/129.png","code":"ne"},{"path":"assets/country_flags/130.p130","code":"ng"},{"path":"assets/country_flags/131.png","code":"ni"},{"path":"assets/country_flags/132.png","code":"nl"},{"path":"assets/country_flags/133.png","code":"no"},{"path":"assets/country_flags/134.png","code":"np"},{"path":"assets/country_flags/135.png","code":"nr"},{"path":"assets/country_flags/136.png","code":"nz"},{"path":"assets/country_flags/137.png","code":"om"},{"path":"assets/country_flags/138.png","code":"pa"},{"path":"assets/country_flags/139.png","code":"pe"},{"path":"assets/country_flags/140.png","code":"pg"},{"path":"assets/country_flags/141.png","code":"ph"},{"path":"assets/country_flags/142.png","code":"pk"},{"path":"assets/country_flags/143.png","code":"pl"},{"path":"assets/country_flags/144.png","code":"pt"},{"path":"assets/country_flags/145.png","code":"pw"},{"path":"assets/country_flags/146.png","code":"py"},{"path":"assets/country_flags/147.png","code":"qa"},{"path":"assets/country_flags/148.png","code":"ro"},{"path":"assets/country_flags/149.png","code":"rs"},{"path":"assets/country_flags/150.png","code":"r"},{"path":"assets/country_flags/151.png","code":"rw"},{"path":"assets/country_flags/152.png","code":"sa"},{"path":"assets/country_flags/153.png","code":"sb"},{"path":"assets/country_flags/154.png","code":"sc"},{"path":"assets/country_flags/155.png","code":"sd"},{"path":"as156ts/country_flags/156.png","code":"se"},{"path":"assets/country_flags/157.png","code":"sg"},{"path":"assets/country_flags/158.png","code":"si"},{"path":"assets/country_flags/159.png","code":"sk"},{"path":"assets/country_flags/160.png","code":"sl"},{"path":"assets/country_flags/161.png","code":"sm"},{"path":"assets/country_flags/162.png","code":"sn"},{"path":"assets/country_flags/163.png","code":"so"},{"path":"assets/country_flags/164.png","code":"sr"},{"path":"assets/country_flags/165.png","code":"st"},{"path":"assets/country_flags/166.png","code":"sv"},{"path":"assets/country_flags/167.png","code":"sy"},{"path":"assets/country_flags/168.png","code":"sz"},{"path":"assets/country_flags/169.png","code":"td"},{"path":"assets/country_flags/170.png","code":"tg"},{"path":"assets/country_flags/171.png","code":"th"},{"path":"assets/country_flags/172.png","code":"tj"},{"path":"assets/country_flags/173.png","code":"tl"},{"path":"assets/country_flags/174.png","code":"tm"},{"path":"assets/country_flags/175.png","code":"tn"},{"path":"assets/country_flags/176.png","code":"to"},{"path":"assets/coun177y_flags/177.png","code":"tr"},{"path":"assets/country_flags/178.png","code":"tt"},{"path":"assets/country_flags/179.png","code":"tv"},{"path":"assets/country_flags/180.png","code":"tw"},{"path":"assets/country_flags/181.png","code":"tz"},{"path":"assets/country_flags/182.png","code":"ua"},{"path":"assets/country_flags/183.png","code":"ug"},{"path":"assets/country_flags/184.png","code":"us"},{"path":"assets/country_flags/185.png","code":"uy"},{"path":"assets/country_flags/186.png","code":"uz"},{"path":"assets/country_flags/187.png","code":"va"},{"path":"assets/country_flags/188.png","code":"vc"},{"path":"assets/country_flags/189.png","code":"ve"},{"path":"assets/country_flags/190.png","code":"vn"},{"path":"assets/country_flags/191.png","code":"v"},{"path":"assets/country_flags/192.png","code":"ws"},{"path":"assets/country_flags/193.png","code":"ye"},{"path":"assets/country_flags/194.png","code":"za"},{"path":"assets/country_flags/195.png","code":"zm"},{"path":"assets/country_flags/196.png","code":"zw"}]}')},38:function(t,a,s){t.exports=s(53)},43:function(t,a,s){},44:function(t,a,s){},53:function(t,a,s){"use strict";s.r(a);var e=s(1),n=s.n(e),o=s(23),c=s.n(o),r=(s(43),s(44),s(16)),g=s(13),p=s(18),l=s(19),u=s(66),d=s(67),f=s(60),h=s(56),y=s(57),i=s(58),_=s(59),m=s(55),b=s(14),E=s(15),v=s(17),k=s(37),w=function(t){return{type:"CHANGE_GAME_STATUS",payload:{status:t}}},O=function(){return function(t,a){var s=a().game.currentFlagIndex;t(S(s));var e=Object(k.a)(Array(a().flags.length).keys()).filter((function(t){return!a().game.shownFlags.includes(t)}));if(0!==e.length){var n=e[Math.floor(Math.random()*e.length)];t(R(n))}}},j=function(t){return{type:"HANDLE_ERROR",payload:{errorMessage:t}}},A=function(){return{type:"COUNT_CORRECT_ANSWER"}},N=function(t){return{type:"CHANGE_REQUEST_STATUS",payload:{status:t}}},S=function(t){return{type:"ADD_FLAG_TO_SHOWN_FLAGS",payload:{index:t}}},R=function(t){return{type:"CHANGE_CURRENT_FLAG_INDEX",payload:{index:t}}},C=function(t){Object(l.a)(s,t);var a=Object(p.a)(s);function s(t){var e;return Object(r.a)(this,s),(e=a.call(this,t)).handleConfirmation=function(){e.props.fetchAddress()},e.handleStart=function(){},e.props.game.isInProgress||e.props.setRandomFirstIndex(),e}return Object(g.a)(s,[{key:"render",value:function(){return n.a.createElement(m.a,{className:"position-fixed",style:{padding:"1rem"}},n.a.createElement(h.a,null,n.a.createElement(y.a,null,n.a.createElement(i.a,{xs:"12",sm:"4"},n.a.createElement("img",{src:this.props.flags[this.props.game.currentFlagIndex].path,className:"flag-img",alt:"[\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0444\u043b\u0430\u0433]"})),n.a.createElement(i.a,null,n.a.createElement("p",{className:"lead"},"\u0424\u043b\u0430\u0433 #",this.props.game.shownFlags.length+1),n.a.createElement("p",{className:"lead"},"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432: ",this.props.game.correctAnswers)))),n.a.createElement("p",null,"\u041f\u043e\u0442\u044f\u043d\u0438\u0442\u0435 ",n.a.createElement(b.a,{icon:E.d})," \u043c\u0430\u0440\u043a\u0435\u0440 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0443"),n.a.createElement("hr",{className:"my-2"}),n.a.createElement("p",null,"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b ",n.a.createElement(b.a,{icon:E.d}),":",this.props.marker?"  "+this.props.marker.lat.toFixed(2)+", "+this.props.marker.lng.toFixed(2):"\u041c\u0430\u0440\u043a\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),n.a.createElement("p",{className:"lead"},n.a.createElement(_.a,{color:"primary",disabled:this.props.requestSent,onClick:this.handleConfirmation},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b")))}}]),s}(e.Component),T=Object(v.b)((function(t){return{flags:t.flags,game:t.game,requestSent:t.requestSent,marker:t.marker}}),(function(t){return{changeCurrentFlag:function(){t(O())},fetchAddress:function(){t((function(t,a){t(N(!0)),setTimeout((function(){t(N(!1))}),1e3),fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+a().marker.lat+"&lon="+a().marker.lng+"&accept-language=en").then((function(t){if(t.ok)return t.json();var a=new Error("Error "+t.status+": "+t.statusText);throw a.response=t,a}),(function(t){throw new Error(t.message)})).then((function(s){console.log("local: "+a().flags[a().game.currentFlagIndex].code),console.log("got: "+s.address.country_code),0===s.address.country_code.localeCompare(a().flags[a().game.currentFlagIndex].code)&&t(A()),console.log(s.address),t(O())})).catch((function(a){return t(j(a.message))}))}))},setRandomFirstIndex:function(){t((function(t,a){var s=Math.floor(Math.random()*a().flags.length);t(R(s)),t(w(!0))}))}}}))(C),x=function(t){Object(l.a)(s,t);var a=Object(p.a)(s);function s(){var t;Object(r.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=a.call.apply(a,[this].concat(o))).refmarker=Object(e.createRef)(),t.refmap=Object(e.createRef)(),t.toggleDraggable=function(){},t.updatePosition=function(){var a=t.refmarker.current;if(null!=a){var s=a.leafletElement.getLatLng();t.props.changeMarkerPosition(s.lat,s.lng)}},t.componentDidUpdate=function(){t.refmap.current&&t.refmap.current.leafletElement.invalidateSize()},t}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=[this.props.map.center.lat,this.props.map.center.lng],a=[this.props.marker.lat,this.props.marker.lng];return n.a.createElement("div",null,n.a.createElement(u.a,{center:t,zoom:this.props.map.zoom,ref:this.refmap},n.a.createElement(d.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.a.createElement(f.a,{draggable:this.props.marker.draggable,onDragend:this.updatePosition,position:a,ref:this.refmarker})),n.a.createElement(T,null))}}]),s}(e.Component),F=Object(v.b)((function(t){return{map:t.map,marker:t.marker}}),(function(t){return{changeMarkerPosition:function(a,s){return t(function(t,a){return{type:"CHANGE_MARKER_POSITION",payload:{lat:t,lng:a}}}(a,s))}}}))(x),I=s(61),z=s(62),G=s(63),M=s(64),U=s(65),D=function(t){Object(l.a)(s,t);var a=Object(p.a)(s);function s(){return Object(r.a)(this,s),a.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{dark:!0},n.a.createElement(z.a,{className:"mr-auto",style:{flexDirection:"row"},navbar:!0},n.a.createElement(G.a,{active:!0},n.a.createElement(M.a,{style:{padding:"0.5rem"}},n.a.createElement(b.a,{icon:E.c}),n.a.createElement(b.a,{icon:E.e})," \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 \u043f\u043e \u0435\u0435 \u0444\u043b\u0430\u0433\u0443")),n.a.createElement(G.a,null,n.a.createElement(M.a,{style:{padding:"0.5rem"},href:"https://github.com/AndreyZhartun/point-the-flag"},n.a.createElement(b.a,{icon:E.b})," Github ")),n.a.createElement(G.a,null,n.a.createElement(M.a,{href:"/"},n.a.createElement(b.a,{icon:E.a})," \u041f\u0440\u043e \u043c\u0435\u043d\u044f"))),n.a.createElement(U.a,null,"React, leaflet.js, Nominatim API")))}}]),s}(e.Component),H=s(22),L=s(10),P={flags:s(34).a,game:{currentFlagIndex:0,shownFlags:[],correctAnswers:0,isInProgress:!1},map:{center:{lat:40,lng:12},zoom:3},marker:{lat:51.505,lng:-.09,draggable:!0},requestSent:!1,errorMessage:""},W=function(t,a){switch(a.type){case"CHANGE_MARKER_POSITION":var s=Object(L.a)({},t.marker,{lat:a.payload.lat,lng:a.payload.lng});return Object(L.a)({},t,{marker:s});case"ADD_FLAG_TO_SHOWN_FLAGS":var e=t.game.shownFlags.concat(a.payload.index),n=Object(L.a)({},t.game,{shownFlags:e});return Object(L.a)({},t,{game:n});case"CHANGE_CURRENT_FLAG_INDEX":var o=Object(L.a)({},t.game,{currentFlagIndex:a.payload.index});return Object(L.a)({},t,{game:o});case"COUNT_CORRECT_ANSWER":var c=t.game.correctAnswers+1;return Object(L.a)({},t,{game:Object(L.a)({},t.game,{correctAnswers:c})});case"CHANGE_GAME_STATUS":return Object(L.a)({},t,{game:Object(L.a)({},t.game,{isInProgress:a.payload.status})});case"CHANGE_REQUEST_STATUS":return Object(L.a)({},t,{requestSent:a.payload.status});case"HANDLE_ERROR":return Object(L.a)({},t,{errorMessage:a.payload.errorMessage});default:return t}},q=s(35),J=s(36),B=s.n(J),K=Object(H.c)(W,P,Object(H.a)(q.a,B.a));var Q=function(){return n.a.createElement(v.a,{store:K},n.a.createElement(D,null),n.a.createElement(F,null))},X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(t,a){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var s=t.installing;null!=s&&(s.onstatechange=function(){"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(t)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}s(52);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Q,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/point-the-flag",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/point-the-flag","/service-worker.js");X?(!function(t,a){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(s){var e=s.headers.get("content-type");404===s.status||null!=e&&-1===e.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):Z(t,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Z(a,t)}))}}()}},[[38,1,2]]]);
//# sourceMappingURL=main.2fbe7762.chunk.js.map